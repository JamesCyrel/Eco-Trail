<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Your Adventure | North Highway District Eco-Trail</title>
    <link rel="icon" type="image/png" href="images/logo.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="booking.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar" id="navbar">
        <div class="container">
            <div class="nav-brand">
                <img src="images/logo.png" alt="North Highway District Eco-Trail logo" class="nav-logo">
                <div class="nav-brand-text">
                    <span class="brand-title">Eco-Trail</span>
                    <span class="brand-subtitle">North Highway District</span>
                </div>
            </div>
            <div class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html#home" class="nav-link">Home</a></li>
                <li><a href="index.html#day1" class="nav-link">Day 1</a></li>
                <li><a href="index.html#day2" class="nav-link">Day 2</a></li>
                <li><a href="index.html#day3" class="nav-link">Day 3</a></li>
                <li><a href="index.html#sustainability" class="nav-link">Sustainability</a></li>
                <li><a href="index.html#testimonials" class="nav-link">Testimonials</a></li>
                <li><a href="booking.html" class="nav-link btn-nav">Book Now</a></li>
                <li id="authNav">
                    <a href="login.html" class="nav-link" id="loginLink">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </a>
                    <a href="#" class="nav-link" id="logoutLink" style="display: none;" onclick="handleLogout(event)">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                    <span class="nav-link user-greeting" id="userGreeting" style="display: none; color: var(--primary-color); font-weight: 600;">
                        <i class="fas fa-user-circle"></i> <span id="userName"></span>
                    </span>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Booking Section -->
    <section class="booking-section" style="padding-top: 120px;">
        <div class="container">
            <div class="booking-content">
                <!-- Page Header -->
                <div class="section-header centered">
                    <span class="section-tag">Book Your Adventure</span>
                    <h2><i class="fas fa-compass"></i> Book Your Personalized Adventure</h2>
                    <p class="section-subtitle" style="max-width: 900px; margin: 0 auto 2rem; font-size: 1.1rem; line-height: 1.8;">
                        Welcome to the North Highway District Eco-Trail! We're thrilled to offer you a customized 3-day eco-tour experience that lets you choose the perfect activities based on your interests. Whether you're drawn to the beauty of nature, fascinated by local culture, or looking to explore the unique man-made landmarks, this tour lets you mix and match the activities for each day. <strong>Your adventure, your way!</strong>
                    </p>
                </div>

                <div class="booking-modal-body" style="grid-template-columns: 2fr 1fr; gap: 2rem; padding: 0;">
                    <!-- Left Side: Form -->
                    <div class="booking-form-section" style="max-height: none; padding-right: 1rem;">
                        <form id="customBookingForm">
                            <!-- Personal Information -->
                            <div class="form-section">
                                <div class="form-section-title">
                                    <i class="fas fa-user"></i>
                                    <h3>Personal Information</h3>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="fullName">Full Name *</label>
                                        <input type="text" id="fullName" name="fullName" placeholder="John Doe" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="email">Email Address *</label>
                                        <input type="email" id="email" name="email" placeholder="example@gmail.com" required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="phone">Phone Number *</label>
                                        <input type="tel" id="phone" name="phone" placeholder="09123456789" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="numberOfPeople">Number of People *</label>
                                        <select id="numberOfPeople" name="numberOfPeople" required>
                                            <option value="">Select group size</option>
                                            <option value="1">1 person</option>
                                            <option value="2">2 people</option>
                                            <option value="3">3 people</option>
                                            <option value="4">4 people</option>
                                            <option value="5">5 people</option>
                                            <option value="6-9">6-9 people</option>
                                            <option value="custom">(10 or more people)</option>
                                        </select>
                                        <div id="customPeopleInput" style="display: none; margin-top: 1rem;">
                                            <label for="customPeopleCount" style="font-size: 0.9rem; color: var(--text-light);">Enter number of people:</label>
                                            <input type="number" id="customPeopleCount" name="customPeopleCount" min="1" placeholder="Enter number of people" style="width: 100%; margin-top: 0.5rem;">
                                            <small style="color: var(--text-light); font-size: 0.85rem; margin-top: 0.3rem; display: block;">
                                                <i class="fas fa-info-circle"></i> Groups of 10 or more automatically receive a 15% discount!
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Tour Date Selection -->
                            <div class="form-section">
                                <div class="form-section-title">
                                    <i class="fas fa-calendar"></i>
                                    <h3>Select Your Tour Date</h3>
                                    <p style="color: var(--text-light); font-size: 0.95rem; margin-top: 0.5rem; font-weight: normal;">Choose when you'd like to start your eco-trail adventure</p>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="tourStartDate">Preferred Start Date *</label>
                                        <input type="date" id="tourStartDate" name="tourStartDate" required>
                                        <small style="color: var(--text-light); font-size: 0.85rem; margin-top: 0.3rem; display: block;">Please select your preferred start date for the tour</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="tourEndDate">Expected End Date</label>
                                        <input type="date" id="tourEndDate" name="tourEndDate" readonly style="background: var(--light-color); cursor: not-allowed;">
                                        <small style="color: var(--text-light); font-size: 0.85rem; margin-top: 0.3rem; display: block;">Automatically calculated based on selected days</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Package Selection -->
                            <div class="form-section">
                                <div class="form-section-title">
                                    <i class="fas fa-box"></i>
                                    <h3>Choose Your Tour Package</h3>
                                </div>
                                <div class="package-selection-modal">
                                    <label class="package-option-modal" data-package="full">
                                        <input type="radio" name="packageType" value="full" checked>
                                        <div class="package-content-modal">
                                            <h4><i class="fas fa-star"></i> Full 3-Day Package</h4>
                                            <p>Select this if you want to experience the full tour with a mix of all three types of activities (Natural, Cultural, and Man-made) across the three days.</p>
                                            <span class="package-price-badge">₱4,500/person</span>
                                            <span class="discount-badge" style="background: var(--accent-color); color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.85rem; margin-top: 0.5rem; display: inline-block;">Discounted Price!</span>
                                        </div>
                                    </label>
                                    <label class="package-option-modal" data-package="custom">
                                        <input type="radio" name="packageType" value="custom">
                                        <div class="package-content-modal">
                                            <h4><i class="fas fa-sliders-h"></i> Custom Selection</h4>
                                            <p>Choose from the three activity types for each day—Natural, Cultural, or Man-made—based on your preferences.</p>
                                            <span class="package-price-badge">From ₱1,300</span>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Eco-Camp Selection (visible for both packages) -->
                            <div class="form-section" id="ecoCampSelectionSection">
                                <div class="form-section-title">
                                    <i class="fas fa-campground"></i>
                                    <h3>Choose Your Eco-Camp (Day 1)</h3>
                                    <p style="color: var(--text-light); font-size: 0.95rem; margin-top: 0.5rem; font-weight: normal;">
                                        If you added the Eco-Camp Experience, choose your preferred camp location. You can also preview each camp before selecting.
                                    </p>
                                </div>
                                <input type="hidden" id="selectedEcoCamp" name="selectedEcoCamp" value="">
                                
                                <div class="eco-camp-selection-grid">
                                    <label class="eco-camp-option" data-camp="sabangan">
                                        <input type="radio" name="ecoCampChoice" value="sabangan">
                                        <div class="eco-camp-card-content">
                                            <div class="eco-camp-icon">
                                                <i class="fas fa-water"></i>
                                            </div>
                                            <h4>Sabangan Eco-Camp</h4>
                                            <p>Riverfront setting near Can-ayan</p>
                                            <button type="button" class="btn-preview gallery-trigger" data-gallery="sabangan">
                                                <i class="fas fa-images"></i> Preview Camp
                                            </button>
                                        </div>
                                    </label>

                                    <label class="eco-camp-option" data-camp="misty">
                                        <input type="radio" name="ecoCampChoice" value="misty">
                                        <div class="eco-camp-card-content">
                                            <div class="eco-camp-icon">
                                                <i class="fas fa-mountain"></i>
                                            </div>
                                            <h4>Misty Mountain Eco-Camp</h4>
                                            <p>Highland forest with scenic views</p>
                                            <button type="button" class="btn-preview gallery-trigger" data-gallery="misty">
                                                <i class="fas fa-images"></i> Preview Camp
                                            </button>
                                        </div>
                                    </label>

                                    <label class="eco-camp-option" data-camp="katihan">
                                        <input type="radio" name="ecoCampChoice" value="katihan">
                                        <div class="eco-camp-card-content">
                                            <div class="eco-camp-icon">
                                                <i class="fas fa-tree"></i>
                                            </div>
                                            <h4>Katihan Eco-Camp</h4>
                                            <p>Riverside corridor in Kibalabag</p>
                                            <button type="button" class="btn-preview gallery-trigger" data-gallery="katihan">
                                                <i class="fas fa-images"></i> Preview Camp
                                            </button>
                                        </div>
                                    </label>
                                </div>

                                <p style="color: var(--text-light); font-size: 0.9rem; margin-top: 1rem; font-style: italic;">
                                    <i class="fas fa-info-circle"></i> Note: Eco-camp selection is included when you check the "Eco-Camp Experience" add-on. No additional cost.
                                </p>
                            </div>
                            
                            <!-- Farm Visit Selection (for Day 2) -->
                            <div class="form-section" id="farmVisitSelectionSection">
                                <div class="form-section-title">
                                    <i class="fas fa-tractor"></i>
                                    <h3>Choose Your Farm Visit (Day 2)</h3>
                                    <p style="color: var(--text-light); font-size: 0.95rem; margin-top: 0.5rem; font-weight: normal;">
                                        Select your preferred farm for the Day 2 cultural experience. Preview each farm before choosing.
                                    </p>
                                </div>
                                <input type="hidden" id="selectedFarmVisit" name="selectedFarmVisit" value="">
                                
                                <div class="eco-camp-selection-grid">
                                    <label class="sunset-view-option" data-farm="kitanglad">
                                        <input type="radio" name="farmVisitChoice" value="kitanglad">
                                        <div class="eco-camp-card-content">
                                            <div class="eco-camp-icon">
                                                <i class="fas fa-mountain"></i>
                                            </div>
                                            <h4>Mt. Kitanglad Agri-Tourism Farm</h4>
                                            <p>Imbayao, Malaybalay City</p>
                                            <button type="button" class="btn-preview gallery-trigger" data-gallery="kitangladfarm">
                                                <i class="fas fa-images"></i> Preview Farm
                                            </button>
                                        </div>
                                    </label>

                                    <label class="sunset-view-option" data-farm="candiisan">
                                        <input type="radio" name="farmVisitChoice" value="candiisan">
                                        <div class="eco-camp-card-content">
                                            <div class="eco-camp-icon">
                                                <i class="fas fa-seedling"></i>
                                            </div>
                                            <h4>Candiisan Diversified Farm</h4>
                                            <p>Sitio Candi-Isan, Can-ayan</p>
                                            <button type="button" class="btn-preview gallery-trigger" data-gallery="candiisanfarm">
                                                <i class="fas fa-images"></i> Preview Farm
                                            </button>
                                        </div>
                                    </label>
                                </div>

                                <p style="color: var(--text-light); font-size: 0.9rem; margin-top: 1rem; font-style: italic;">
                                    <i class="fas fa-info-circle"></i> Note: Farm visit is part of Day 2 cultural experience. Transport and guided tour included.
                                </p>
                            </div>

                            <!-- Sunset View Selection (for Day 3) -->
                            <div class="form-section" id="sunsetViewSelectionSection">
                                <div class="form-section-title">
                                    <i class="fas fa-sun"></i>
                                    <h3>Choose Your Sunset View Spot (Day 3)</h3>
                                    <p style="color: var(--text-light); font-size: 0.95rem; margin-top: 0.5rem; font-weight: normal;">
                                        Select your preferred sunset viewing location for Day 3. Preview each location before choosing.
                                    </p>
                                </div>
                                <input type="hidden" id="selectedSunsetView" name="selectedSunsetView" value="">
                                
                                <div class="eco-camp-selection-grid">
                                    <label class="sunset-view-option" data-view="canayan">
                                        <input type="radio" name="sunsetViewChoice" value="canayan">
                                        <div class="eco-camp-card-content">
                                            <div class="eco-camp-icon">
                                                <i class="fas fa-mountain"></i>
                                            </div>
                                            <h4>Can-ayan View Deck</h4>
                                            <p>Community-managed scenic viewpoint</p>
                                            <button type="button" class="btn-preview gallery-trigger" data-gallery="canayan">
                                                <i class="fas fa-images"></i> Preview Location
                                            </button>
                                        </div>
                                    </label>

                                    <label class="sunset-view-option" data-view="earthsky">
                                        <input type="radio" name="sunsetViewChoice" value="earthsky">
                                        <div class="eco-camp-card-content">
                                            <div class="eco-camp-icon">
                                                <i class="fas fa-cloud-sun"></i>
                                            </div>
                                            <h4>Earth Sky View</h4>
                                            <p>Hilltop resort with infinity pool</p>
                                            <button type="button" class="btn-preview gallery-trigger" data-gallery="earthskyview">
                                                <i class="fas fa-images"></i> Preview Location
                                            </button>
                                        </div>
                                    </label>
                                </div>

                                <p style="color: var(--text-light); font-size: 0.9rem; margin-top: 1rem; font-style: italic;">
                                    <i class="fas fa-info-circle"></i> Note: Sunset view selection is part of Day 3 experience. Transport included in tour package.
                                </p>
                            </div>

                            <!-- Resort Selection (for Day 3) -->
                            <div class="form-section" id="resortSelectionSection">
                                <div class="form-section-title">
                                    <i class="fas fa-hotel"></i>
                                    <h3>Choose Your Resort (Day 3)</h3>
                                    <p style="color: var(--text-light); font-size: 0.95rem; margin-top: 0.5rem; font-weight: normal;">
                                        Select your preferred resort for the Day 3 man-made attractions. Preview each resort before choosing.
                                    </p>
                                </div>
                                <input type="hidden" id="selectedResort" name="selectedResort" value="">
                                
                                <div class="eco-camp-selection-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                                    <label class="sunset-view-option" data-resort="tribu">
                                        <input type="radio" name="resortChoice" value="tribu">
                                        <div class="eco-camp-card-content">
                                            <div class="eco-camp-icon">
                                                <i class="fas fa-home"></i>
                                            </div>
                                            <h4>Tribu Cabin</h4>
                                            <p>Can-ayan, North Highway District</p>
                                            <button type="button" class="btn-preview gallery-trigger" data-gallery="triburesort">
                                                <i class="fas fa-images"></i> Preview Resort
                                            </button>
                                        </div>
                                    </label>

                                    <label class="sunset-view-option" data-resort="ohana">
                                        <input type="radio" name="resortChoice" value="ohana">
                                        <div class="eco-camp-card-content">
                                            <div class="eco-camp-icon">
                                                <i class="fas fa-umbrella-beach"></i>
                                            </div>
                                            <h4>Ohana Resort</h4>
                                            <p>Sumpong, Malaybalay City</p>
                                            <button type="button" class="btn-preview gallery-trigger" data-gallery="ohanaresort">
                                                <i class="fas fa-images"></i> Preview Resort
                                            </button>
                                        </div>
                                    </label>

                                    <label class="sunset-view-option" data-resort="casadevera">
                                        <input type="radio" name="resortChoice" value="casadevera">
                                        <div class="eco-camp-card-content">
                                            <div class="eco-camp-icon">
                                                <i class="fas fa-swimming-pool"></i>
                                            </div>
                                            <h4>Casa de Vera Resort</h4>
                                            <p>Kalasungay, North Highway District</p>
                                            <button type="button" class="btn-preview gallery-trigger" data-gallery="casaresort">
                                                <i class="fas fa-images"></i> Preview Resort
                                            </button>
                                        </div>
                                    </label>
                                </div>

                                <p style="color: var(--text-light); font-size: 0.9rem; margin-top: 1rem; font-style: italic;">
                                    <i class="fas fa-info-circle"></i> Note: Resort visit is part of Day 3 experience. Transport included in tour package.
                                </p>
                            </div>

                            <!-- Custom Daily Activities -->
                            <div class="form-section" id="customActivitiesSection" style="display: none;">
                                <div class="form-section-title">
                                    <i class="fas fa-calendar-day"></i>
                                    <h3>Customize Your Daily Activities</h3>
                                    <p style="color: var(--text-light); font-size: 0.95rem; margin-top: 0.5rem; font-weight: normal;">Select 1, 2, or all 3 days based on your preference. You can choose any combination!</p>
                                </div>

                                <!-- Day 1 -->
                                <div class="day-selection-modal">
                                    <h4><i class="fas fa-calendar-alt"></i> Day 1 - Choose Your Activity Type</h4>
                                    <p style="color: var(--text-light); margin-bottom: 1rem; font-size: 0.95rem;">Select your preferred activity for Day 1 of the tour:</p>
                                    <div class="activity-types-modal">
                                        <label class="activity-card-modal" data-day="1" data-type="natural">
                                            <input type="radio" name="day1Activity" value="natural">
                                            <i class="fas fa-water"></i>
                                            <h5>Natural Attractions</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Waterfalls, Forest Trekking, River Ecology</p>
                                            <span class="price">₱1,500</span>
                                        </label>
                                        <label class="activity-card-modal" data-day="1" data-type="cultural">
                                            <input type="radio" name="day1Activity" value="cultural">
                                            <i class="fas fa-hands"></i>
                                            <h5>Cultural Attractions</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Local Storytelling, Crafting, Cultural Demos</p>
                                            <span class="price">₱1,300</span>
                                        </label>
                                        <label class="activity-card-modal" data-day="1" data-type="manmade">
                                            <input type="radio" name="day1Activity" value="manmade">
                                            <i class="fas fa-coffee"></i>
                                            <h5>Man-made Attractions</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Ridge Walks, Café Hopping, Scenic Views</p>
                                            <span class="price">₱1,700</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Day 2 -->
                                <div class="day-selection-modal">
                                    <h4><i class="fas fa-calendar-alt"></i> Day 2 - Choose Your Activity Type</h4>
                                    <p style="color: var(--text-light); margin-bottom: 1rem; font-size: 0.95rem;">Select your preferred activity for Day 2 of the tour:</p>
                                    <div class="activity-types-modal">
                                        <label class="activity-card-modal" data-day="2" data-type="natural">
                                            <input type="radio" name="day2Activity" value="natural">
                                            <i class="fas fa-tree"></i>
                                            <h5>Natural Attractions</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Waterfalls, Forest Trekking, River Ecology</p>
                                            <span class="price">₱1,500</span>
                                        </label>
                                        <label class="activity-card-modal" data-day="2" data-type="cultural">
                                            <input type="radio" name="day2Activity" value="cultural">
                                            <i class="fas fa-tractor"></i>
                                            <h5>Cultural Attractions</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Local Storytelling, Crafting, Cultural Demos</p>
                                            <span class="price">₱1,300</span>
                                        </label>
                                        <label class="activity-card-modal" data-day="2" data-type="manmade">
                                            <input type="radio" name="day2Activity" value="manmade">
                                            <i class="fas fa-mountain"></i>
                                            <h5>Man-made Attractions</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Ridge Walks, Café Hopping, Scenic Views</p>
                                            <span class="price">₱1,700</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Day 3 -->
                                <div class="day-selection-modal">
                                    <h4><i class="fas fa-calendar-alt"></i> Day 3 - Choose Your Activity Type</h4>
                                    <p style="color: var(--text-light); margin-bottom: 1rem; font-size: 0.95rem;">Select your preferred activity for Day 3 of the tour:</p>
                                    <div class="activity-types-modal">
                                        <label class="activity-card-modal" data-day="3" data-type="natural">
                                            <input type="radio" name="day3Activity" value="natural">
                                            <i class="fas fa-leaf"></i>
                                            <h5>Natural Attractions</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Waterfalls, Forest Trekking, River Ecology</p>
                                            <span class="price">₱1,500</span>
                                        </label>
                                        <label class="activity-card-modal" data-day="3" data-type="cultural">
                                            <input type="radio" name="day3Activity" value="cultural">
                                            <i class="fas fa-utensils"></i>
                                            <h5>Cultural Attractions</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Local Storytelling, Crafting, Cultural Demos</p>
                                            <span class="price">₱1,300</span>
                                        </label>
                                        <label class="activity-card-modal" data-day="3" data-type="manmade">
                                            <input type="radio" name="day3Activity" value="manmade">
                                            <i class="fas fa-sun"></i>
                                            <h5>Man-made Attractions</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Ridge Walks, Café Hopping, Scenic Views</p>
                                            <span class="price">₱1,700</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Optional Add-Ons -->
                            <div class="form-section">
                                <div class="form-section-title">
                                    <i class="fas fa-plus-circle"></i>
                                    <h3>Optional Add-Ons</h3>
                                    <p style="color: var(--text-light); font-size: 0.95rem; margin-top: 0.5rem;">Customize your experience even further with these additional activities:</p>
                                </div>
                                <div class="addon-options-modal">
                                    <label class="addon-card-modal" data-addon="ecocamp">
                                        <input type="checkbox" name="addon_ecocamp" value="500">
                                        <div class="addon-info-modal">
                                            <h5>Eco-Camp Experience</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Stay overnight in an eco-friendly camp with guided night walks and stargazing (Day 1 or Day 2)</p>
                                            <span class="addon-price">₱500/person</span>
                                        </div>
                                    </label>
                                    <label class="addon-card-modal" data-addon="night">
                                        <input type="checkbox" name="addon_night" value="350">
                                        <div class="addon-info-modal">
                                            <h5>Night Programs</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Stargazing or local storytelling nights (Day 1 or Day 2)</p>
                                            <span class="addon-price">₱350/person</span>
                                        </div>
                                    </label>
                                    <label class="addon-card-modal" data-addon="food">
                                        <input type="checkbox" name="addon_food" value="250">
                                        <div class="addon-info-modal">
                                            <h5>Heritage Food Tasting</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Enjoy a variety of local delicacies at a traditional farm (Day 2)</p>
                                            <span class="addon-price">₱250/person</span>
                                        </div>
                                    </label>
                                    <label class="addon-card-modal" data-addon="conservation">
                                        <input type="checkbox" name="addon_conservation" value="150">
                                        <div class="addon-info-modal">
                                            <h5>Conservation Activities</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-light); margin: 0.3rem 0;">Participate in tree-planting or a river cleanup</p>
                                            <span class="addon-price">₱150/person</span>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Special Requests -->
                            <div class="form-section">
                                <div class="form-section-title">
                                    <i class="fas fa-clipboard-list"></i>
                                    <h3>Special Requests</h3>
                                    <p style="color: var(--text-light); font-size: 0.95rem; margin-top: 0.5rem;">Let us know if you have any specific needs or preferences:</p>
                                </div>
                                <div class="form-group">
                                    <label for="dietary">Dietary Preferences</label>
                                    <input type="text" id="dietary" name="dietary" placeholder="e.g., Vegetarian, Gluten-Free">
                                </div>
                                <div class="form-group">
                                    <label for="accessibility">Accessibility Needs</label>
                                    <input type="text" id="accessibility" name="accessibility" placeholder="e.g., Wheelchair Access, Special Accommodations">
                                </div>
                            </div>

                            <!-- Payment Method -->
                            <div class="form-section">
                                <div class="form-section-title">
                                    <i class="fas fa-credit-card"></i>
                                    <h3>Payment Methods</h3>
                                    <p style="color: var(--text-light); font-size: 0.95rem; margin-top: 0.5rem;">Choose your preferred payment method:</p>
                                </div>
                                <div class="payment-methods-modal">
                                    <label class="payment-method-modal" data-method="card">
                                        <input type="radio" name="paymentMethod" value="card" required checked>
                                        <i class="fas fa-credit-card"></i>
                                        <span>Credit/Debit Card</span>
                                        <p style="font-size: 0.8rem; color: var(--text-light); margin-top: 0.3rem;">Visa, MasterCard, Amex</p>
                                    </label>
                                    <label class="payment-method-modal" data-method="paypal">
                                        <input type="radio" name="paymentMethod" value="paypal">
                                        <i class="fab fa-paypal"></i>
                                        <span>PayPal</span>
                                        <p style="font-size: 0.8rem; color: var(--text-light); margin-top: 0.3rem;">Pay securely with PayPal</p>
                                    </label>
                                    <label class="payment-method-modal" data-method="gcash">
                                        <input type="radio" name="paymentMethod" value="gcash">
                                        <i class="fas fa-mobile-alt"></i>
                                        <span>GCash</span>
                                        <p style="font-size: 0.8rem; color: var(--text-light); margin-top: 0.3rem;">Pay via GCash mobile wallet</p>
                                    </label>
                                    <label class="payment-method-modal" data-method="bank">
                                        <input type="radio" name="paymentMethod" value="bank">
                                        <i class="fas fa-university"></i>
                                        <span>Bank Transfer</span>
                                        <p style="font-size: 0.8rem; color: var(--text-light); margin-top: 0.3rem;">Direct transfer (details after booking)</p>
                                    </label>
                                    <label class="payment-method-modal" data-method="cash">
                                        <input type="radio" name="paymentMethod" value="cash">
                                        <i class="fas fa-money-bill-wave"></i>
                                        <span>Cash on Arrival</span>
                                        <p style="font-size: 0.8rem; color: var(--text-light); margin-top: 0.3rem;">For locals (available for Day 1 booking)</p>
                                    </label>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-check-circle"></i> Complete Booking
                            </button>
                        </form>
                    </div>

                    <!-- Right Side: Price Summary -->
                    <div class="price-summary-modal" id="priceSummary" style="position: sticky; top: 120px;">
                        <h3><i class="fas fa-calculator"></i> Price Summary</h3>
                        
                        <div class="price-line">
                            <span>Base Package:</span>
                            <span id="basePrice">$140.00</span>
                        </div>
                        
                        <div id="activityBreakdown"></div>
                        <div id="addonsList"></div>
                        
                        <div class="price-line">
                            <span>Number of People:</span>
                            <span id="peopleCount">1</span>
                        </div>
                        
                        <div class="price-line">
                            <span>Subtotal:</span>
                            <span id="subtotal">$140.00</span>
                        </div>
                        
                        <div class="price-line" id="discountLine" style="display: none; color: #4caf50;">
                            <span>Discount:</span>
                            <span id="discountAmount">-$0.00</span>
                        </div>
                        
                        <div class="price-total">
                            <div class="price-line">
                                <span>Total:</span>
                                <span id="totalPrice">$140.00</span>
                            </div>
                        </div>
                        
                        <div class="discount-code-section">
                            <label style="font-size: 0.9rem; font-weight: 600;">Discount Code</label>
                            <p style="font-size: 0.85rem; color: rgba(255,255,255,0.8); margin: 0.5rem 0;">
                                Available discount codes: <strong>STUDENT10</strong> (10% for students), <strong>PWD</strong> (10% for PWD), <strong>SENIOR</strong> (10% for seniors). Valid for any number of people.
                            </p>
                            <div class="discount-input-group">
                                <input type="text" id="discountCode" placeholder="Enter code (e.g., STUDENT10)">
                                <button type="button" id="applyDiscount">Apply</button>
                            </div>
                            <div id="discountApplied" class="discount-applied" style="display: none;">
                                <i class="fas fa-check-circle"></i>
                                <span>Code applied!</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <img src="images/logo.png" alt="North Highway District Eco-Trail logo" class="footer-logo">
                        <div>
                            <h3>Eco-Trail</h3>
                            <p class="footer-tagline">North Highway District</p>
                        </div>
                    </div>
                    <p>Experience the perfect blend of nature, culture, and sustainability in the beautiful highlands of Malaybalay City, Bukidnon.</p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/profile.php?id=61584566633427&mibextid=LQQJ4d&rdid=xDWzE3Utj6yDy8AS&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F16c5kcEzj7%2F%3Fmibextid%3DLQQJ4d#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html#home">Home</a></li>
                        <li><a href="index.html#day1">Day 1 Itinerary</a></li>
                        <li><a href="index.html#day2">Day 2 Itinerary</a></li>
                        <li><a href="index.html#day3">Day 3 Itinerary</a></li>
                        <li><a href="index.html#sustainability">Sustainability</a></li>
                        <li><a href="index.html#testimonials">Testimonials</a></li>
                        <li><a href="booking.html">Booking</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact Us</h4>
                    <ul class="contact-info">
                        <li><i class="fas fa-map-marker-alt"></i> North Highway District, Malaybalay City, Bukidnon</li>
                        <li><i class="fas fa-phone"></i> +63 912 345 6789</li>
                        <li><i class="fas fa-envelope"></i> info@ecotrail-bukidnon.ph</li>
                        <li><i class="fas fa-clock"></i> Mon - Sun: 8:00 AM - 6:00 PM</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 North Highway District Eco-Trail. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Custom Logout Confirmation Modal -->
    <div id="logoutModal" class="custom-modal-overlay" style="display: none;">
        <div class="custom-modal">
            <div class="custom-modal-header">
                <div class="modal-icon">
                    <i class="fas fa-sign-out-alt"></i>
                </div>
                <h3>Confirm Logout</h3>
            </div>
            <div class="custom-modal-body">
                <p>Are you sure you want to logout? You'll need to login again to access your account.</p>
            </div>
            <div class="custom-modal-footer">
                <button class="btn btn-secondary" onclick="closeLogoutModal()">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-primary" onclick="confirmLogout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </div>

    <!-- Gallery Modal for Eco-Camps -->
    <div id="galleryModal" class="gallery-modal-overlay" style="display: none;">
        <div class="gallery-modal">
            <button class="gallery-close" aria-label="Close gallery" onclick="closeGalleryModal()">
                <i class="fas fa-times"></i>
            </button>
            <div class="gallery-header">
                <p class="gallery-label">Eco-Camp Preview</p>
                <h3 id="galleryTitle">Camp Name</h3>
                <p id="gallerySubtitle">Location details</p>
            </div>
            <div class="gallery-grid" id="galleryGrid">
                <!-- Populated via JS -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="booking.js"></script>
    <script>
        // Check if user is logged in and update nav
        document.addEventListener('DOMContentLoaded', () => {
            checkUserAuth();
            checkBookingAccess();
        });

        // Check if user is authorized to access booking page
        function checkBookingAccess() {
            const localUser = localStorage.getItem('ecotrail_user');
            const sessionUser = sessionStorage.getItem('ecotrail_user');
            const userDataString = localUser || sessionUser;
            
            if (!userDataString) {
                // User is not logged in, redirect to login page
                if (typeof showNotification === 'function') {
                    showNotification('Please login or sign up to book your tour', 'info');
                }
                
                // Store the current URL to redirect back after login
                sessionStorage.setItem('redirectAfterLogin', window.location.href);
                
                // Redirect to login page after a short delay
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 1500);
            }
        }

        function checkUserAuth() {
            const localUser = localStorage.getItem('ecotrail_user');
            const sessionUser = sessionStorage.getItem('ecotrail_user');
            const userDataString = localUser || sessionUser;
            
            if (userDataString) {
                try {
                    const userData = JSON.parse(userDataString);
                    // User is logged in
                    document.getElementById('loginLink').style.display = 'none';
                    document.getElementById('logoutLink').style.display = 'block';
                    document.getElementById('userGreeting').style.display = 'block';
                    
                    // Set user name
                    const userName = userData.firstName || userData.name || userData.email.split('@')[0];
                    document.getElementById('userName').textContent = userName;
                } catch (e) {
                    console.error('Error parsing user data:', e);
                }
            } else {
                // User is not logged in
                document.getElementById('loginLink').style.display = 'block';
                document.getElementById('logoutLink').style.display = 'none';
                document.getElementById('userGreeting').style.display = 'none';
            }
        }

        function handleLogout(event) {
            event.preventDefault();
            showLogoutModal();
        }

        function showLogoutModal() {
            const modal = document.getElementById('logoutModal');
            if (modal) {
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }

        function closeLogoutModal() {
            const modal = document.getElementById('logoutModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = '';
            }
        }

        function confirmLogout() {
            localStorage.removeItem('ecotrail_user');
            sessionStorage.removeItem('ecotrail_user');
            
            closeLogoutModal();
            
            // Show notification if available
            if (typeof showNotification === 'function') {
                showNotification('Logged out successfully', 'success');
            }
            
            // Redirect to login page
            setTimeout(() => {
                window.location.href = 'login.html';
            }, 1000);
        }

        // Close modal when clicking outside
        document.addEventListener('click', (e) => {
            const modal = document.getElementById('logoutModal');
            if (modal && e.target === modal) {
                closeLogoutModal();
            }
        });

        // Close modal with ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeLogoutModal();
                closeGalleryModal();
            }
        });

        // ================================
        // Gallery Modal Logic for Eco-Camps and Sunset Views
        // ================================
        const galleryData = {
            sabangan: {
                title: 'Sabangan Eco-Camp',
                subtitle: 'Sabangan, Can-ayan, Malaybalay City — Riverfront camping surrounded by forested hills',
                images: [
                    { src: 'images/sabangan4.png', label: 'Sabangan Eco-Camp — Main Area' },
                    { src: 'images/sabangan1.png', label: 'Sabangan Eco-Camp — Riverside View' },
                    { src: 'images/sabangan2.png', label: 'Sabangan Eco-Camp — Forest Setting' },
                    { src: 'images/sabangan5.png', label: 'Sabangan Eco-Camp — Camp Facilities' },
                ],
                details: {
                    location: 'Sabangan, Can-ayan, North Highway District, Malaybalay City',
                    accessibility: 'Walk from drop-off point is ~20–30 minutes. Trail is moderately steep but manageable, with guides available.',
                    transportation: '4x4 vehicles provided as part of the tour'
                }
            },
            canayan: {
                title: 'Can-ayan View Deck',
                subtitle: 'Community-managed scenic viewpoint in Barangay Can-ayan',
                images: [
                    { src: 'images/sunset-viewing.png', label: 'Can-ayan View Deck — Mountain panorama' },
                    { src: 'images/sunset-viewing1.png', label: 'Cloud sea over the highlands' },
                    { src: 'images/sunset-viewing2.png', label: 'View deck facing distant peaks' },
                    { src: 'images/sunset-viewing3.png', label: 'Pine-framed ridge walkway' },
                ],
                details: {
                    location: 'Can-ayan View Deck, Barangay Can-ayan, North Highway District',
                    accessibility: 'Short 5–10 minute walk from the designated drop-off area. Moderately easy trail with constructed platform and basic rails.',
                    transportation: '4x4 or high-clearance vehicle provided due to rough access roads'
                }
            },
            earthskyview: {
                title: 'Earth Sky View',
                subtitle: 'Hilltop resort with infinity pool and panoramic mountain views',
                images: [
                    { src: 'images/earthsky.png', label: 'Earth Sky View — Panoramic View' },
                    { src: 'images/earthsky1.png', label: 'Earth Sky View — Outdoor Seating' },
                    { src: 'images/earthsky2.png', label: 'Earth Sky View — Welcome Sign' },
                    { src: 'images/earthsky3.png', label: 'Earth Sky View — Scenic Mountain Backdrop' },
                ],
                details: {
                    location: 'Earth Sky View Resort, North Highway District',
                    accessibility: 'Easily accessible with villa and infinity pool viewpoints. Well-maintained grounds suitable for all visitors.',
                    transportation: 'Standard eco-van transport provided'
                }
            },
            misty: {
                title: 'Misty Mountain Eco-Camp',
                subtitle: 'Misty Mountain Haven, Kibalabag — Highland forest with scenic mountain views',
                images: [
                    { src: 'images/misty.png', label: 'Misty Mountain — Overview' },
                    { src: 'images/misty1.png', label: 'Misty Mountain — Mountain Views' },
                    { src: 'images/misty2.png', label: 'Misty Mountain — Camp Area' },
                    { src: 'images/misty3.png', label: 'Misty Mountain — Forest Trails' },
                ],
                details: {
                    location: 'Misty Mountain Haven, Barangay Kibalabag, North Highway District',
                    accessibility: 'Short walk from parking (~5–10 minutes) to tents and cottages. Terrain is gentle and easy to navigate.',
                    transportation: '4x4 or high-clearance vehicles provided'
                }
            },
            katihan: {
                title: 'Katihan Eco-Camp',
                subtitle: 'Katihan Eco Park, Kibalabag — Lush riverside corridor with serene forest ambience',
                images: [
                    { src: 'images/katihan.png', label: 'Katihan Eco Park — Main View' },
                    { src: 'images/katihan1.png', label: 'Katihan Eco Park — River Area' },
                    { src: 'images/katihan2.png', label: 'Katihan Eco Park — Forest Setting' },
                    { src: 'images/katihan3.png', label: 'Katihan Eco Park — Camping Area' },
                ],
                details: {
                    location: 'Katihan Eco Park, Barangay Kibalabag, North Highway District',
                    accessibility: 'Short walk from drop-off (~10–15 minutes) to camping areas. Trails are manageable with guides available.',
                    transportation: '4x4 vehicles provided as part of the tour'
                }
            },
            kitangladfarm: {
                title: 'Mt. Kitanglad Agri-Tourism Farm',
                subtitle: 'Imbayao, Malaybalay City — Agricultural tours with garden and view decks',
                images: [
                    { src: 'images/Kitanglad.png', label: 'Mt. Kitanglad Farm — Main Entrance' },
                    { src: 'images/Kitanglad1.png', label: 'Mt. Kitanglad — Farm Overview' },
                    { src: 'images/Kitanglad2.png', label: 'Mt. Kitanglad — Cabbage Fields' },
                    { src: 'images/Kitanglad3.png', label: 'Mt. Kitanglad — Farm Signage' },
                ],
                details: {
                    location: 'Imbayao, Malaybalay City',
                    accessibility: 'The farm includes uphill and uneven pathways, with some areas requiring light to moderate walking. Trails may be slippery after rain, so proper footwear is recommended. Not all parts are accessible for guests with mobility issues.',
                    transportation: 'Guests will be transported via eco-van up to the main entrance area. The tour will be guided by farm staff and may include short walks around the gardens and view decks.'
                }
            },
            candiisanfarm: {
                title: 'Candiisan Diversified Farm',
                subtitle: 'Sitio Candi-Isan, Barangay Can-ayan, Malaybalay City — Diversified farming with vegetable plots',
                images: [
                    { src: 'images/Candiisan.png', label: 'Candiisan Farm — Entrance' },
                    { src: 'images/Candiisan1.png', label: 'Candiisan — Farm Structures' },
                    { src: 'images/Candiisan2.png', label: 'Candiisan — Farm Landscape' },
                    { src: 'images/Candiisan3.png', label: 'Candiisan — Farm View' },
                ],
                details: {
                    location: 'Sitio Candi-Isan, Barangay Can-ayan, Malaybalay City',
                    accessibility: 'The tour involves walking through vegetable plots, fruit trees, and cacao or coconut areas. The ground may be uneven and muddy after rain. Suitable for light walking but may not be ideal for those with mobility limitations.',
                    transportation: 'Eco-van will drop guests at the farm\'s access point. A guided tour will be provided by farm staff as visitors walk through the different sections of the diversified farm.'
                }
            },
            triburesort: {
                title: 'Tribu Cabin',
                subtitle: 'Barangay Can‑ayan, North Highway District — Cabin-style lodging with mountain views',
                images: [
                    { src: 'images/tribu.png', label: 'Tribu Cabin — Welcome Area' },
                    { src: 'images/tribu1.png', label: 'Tribu Cabin — Mountain Views' },
                    { src: 'images/tribu2.png', label: 'Tribu Cabin — Cabin Facilities' },
                    { src: 'images/tribu3.png', label: 'Tribu Cabin — Scenic Setting' },
                ],
                details: {
                    location: 'Barangay Can‑ayan, North Highway District, Malaybalay City',
                    accessibility: 'The resort offers cabin‑style lodging with mountain views. Terrain around the cabins is mostly level, but some walking on gravel paths may be required. Not all areas are fully accessible for guests with mobility issues.',
                    transportation: 'Roads leading to the resort are generally passable by eco‑van, but may become rough or muddy after heavy rain. Eco‑van service will be provided when conditions allow; otherwise, alternative transport may be necessary.'
                }
            },
            ohanaresort: {
                title: 'Ohana Resort',
                subtitle: 'Barangay Sumpong, Malaybalay City — Pool resort with tropical atmosphere',
                images: [
                    { src: 'images/ohana.png', label: 'Ohana Resort — Pool Area' },
                    { src: 'images/ohana1.png', label: 'Ohana Resort — Tropical Mural' },
                    { src: 'images/ohana2.png', label: 'Ohana Resort — Pool Features' },
                    { src: 'images/ohana3.png', label: 'Ohana Resort — Resort Grounds' },
                ],
                details: {
                    location: 'Barangay Sumpong, Malaybalay City',
                    accessibility: 'Features huts/rooms and a small pool. Terrain is mostly flat and easily walkable. Some resort areas may not be fully accessible for guests with mobility limitations.',
                    transportation: 'Roads are generally passable by eco‑van, but conditions should be checked ahead of time. Eco‑van service will be provided if roads are safe; otherwise, guests may need alternative transport.'
                }
            },
            casaresort: {
                title: 'Casa de Vera Resort',
                subtitle: 'Barangay Kalasungay, North Highway District — Villas and cottages with pool',
                images: [
                    { src: 'images/casa.png', label: 'Casa de Vera — Entrance Sign' },
                    { src: 'images/casa1.png', label: 'Casa de Vera — Pool Area' },
                    { src: 'images/casa2.png', label: 'Casa de Vera — Resort Facilities' },
                    { src: 'images/casa3.png', label: 'Casa de Vera — Villa Views' },
                ],
                details: {
                    location: 'Barangay Kalasungay, North Highway District, Malaybalay City',
                    accessibility: 'Offers villas, cottages, and a pool. Paths and resort grounds are mostly level and easy to walk. Some areas may require light walking.',
                    transportation: 'Roads are generally suitable for eco‑van, but may be affected by rain or maintenance. Eco‑van service will be provided if passable; otherwise, alternative transport may be arranged.'
                }
            }
        };

        function initGalleryTriggers() {
            const triggers = document.querySelectorAll('.gallery-trigger');
            triggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    const key = trigger.dataset.gallery;
                    openGalleryModal(key);
                });
            });
        }

        function openGalleryModal(key) {
            const modal = document.getElementById('galleryModal');
            if (!modal || !galleryData[key]) return;

            const data = galleryData[key];
            document.getElementById('galleryTitle').textContent = data.title;
            document.getElementById('gallerySubtitle').textContent = data.subtitle;

            const grid = document.getElementById('galleryGrid');
            let gridHTML = data.images.map(image => `
                <figure class="gallery-card">
                    <img src="${image.src}" alt="${image.label}">
                    <figcaption>${image.label}</figcaption>
                </figure>
            `).join('');

            // Add details section for eco-camps
            if (data.details) {
                gridHTML += `
                    <div class="eco-camp-details-panel">
                        <h4><i class="fas fa-info-circle"></i> Camp Information</h4>
                        <div class="detail-item">
                            <strong><i class="fas fa-map-marker-alt"></i> Location:</strong>
                            <p>${data.details.location}</p>
                        </div>
                        <div class="detail-item">
                            <strong><i class="fas fa-hiking"></i> Accessibility:</strong>
                            <p>${data.details.accessibility}</p>
                        </div>
                        <div class="detail-item">
                            <strong><i class="fas fa-truck-monster"></i> Transportation:</strong>
                            <p>${data.details.transportation}</p>
                        </div>
                    </div>
                `;
            }

            grid.innerHTML = gridHTML;

            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeGalleryModal() {
            const modal = document.getElementById('galleryModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = '';
            }
        }

        // Close gallery clicking overlay
        document.addEventListener('click', (e) => {
            const galleryModal = document.getElementById('galleryModal');
            if (galleryModal && e.target === galleryModal) {
                closeGalleryModal();
            }
        });

        // Initialize gallery triggers when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            initGalleryTriggers();
        });
    </script>
</body>
</html>

